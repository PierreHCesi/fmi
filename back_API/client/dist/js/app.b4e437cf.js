(function(t){function e(e){for(var s,r,o=e[0],l=e[1],c=e[2],u=0,m=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&m.push(n[r][0]),n[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);d&&d(e);while(m.length)m.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,r=1;r<a.length;r++){var l=a[r];0!==n[l]&&(s=!1)}s&&(i.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},n={app:0},i=[];function r(t){return o.p+"js/"+({}[t]||t)+"."+{"chunk-0d1d128f":"cdc8c39d","chunk-2d216214":"49bf1fba","chunk-2d216257":"256ee085"}[t]+".js"}function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.e=function(t){var e=[],a=n[t];if(0!==a)if(a)e.push(a[2]);else{var s=new Promise((function(e,s){a=n[t]=[e,s]}));e.push(a[2]=s);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=r(t);var c=new Error;i=function(e){l.onerror=l.onload=null,clearTimeout(u);var a=n[t];if(0!==a){if(a){var s=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",c.name="ChunkLoadError",c.type=s,c.request=i,a[1](c)}n[t]=void 0}};var u=setTimeout((function(){i({type:"timeout",target:l})}),12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(e)},o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var d=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"15ae":function(t,e,a){},"374c":function(t,e,a){},"3d53":function(t,e,a){"use strict";a("374c")},"406b":function(t,e,a){},"44d9":function(t,e,a){"use strict";a("78ea")},4678:function(t,e,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(t){var e=i(t);return a(e)}function i(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=i,t.exports=n,n.id="4678"},"4f3c":function(t,e,a){},"51bf":function(t,e,a){},"54f1":function(t,e,a){},"55a5":function(t,e,a){"use strict";a("6169")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.loading?a("div",{staticClass:"text-center"},[t._m(0)]):a("div",[t.auth?a("App",{attrs:{user:t.user}}):a("LoginForm",{attrs:{errorMessage:t.errorMessage},on:{submit:t.login}})],1)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"spinner-border",attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[t._v("Loading...")])])}],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("Navigation",{attrs:{role:t.role,name:t.user.username}}),a("router-view",{attrs:{id:"main"}}),t._m(0)],1)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"text-muted"},[a("div",{staticClass:"container"},[a("p",{staticClass:"float-right"},[a("a",{attrs:{href:"#"}},[a("i",{staticClass:"bi bi-arrow-up",staticStyle:{"font-size":"3rem"}})])]),a("p",[t._v("Projet web © FFF CESI - RIL 19")]),a("p",[t._v("Benjamin - Pierre")])])])}],l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"nav"}},[s("nav",{staticClass:"navbar navbar-expand-lg navbar-dark bg-dark"},[s("img",{staticClass:"d-inline-block align-top logo",attrs:{src:a("70dd"),width:"50",height:"50",alt:"logo fff_cesi"}}),t._m(0),s("div",{staticClass:"collapse navbar-collapse ml-5",attrs:{id:"navbarText"}},[s("ul",{staticClass:"navbar-nav mr-auto"},["ADMIN"==t.role?s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link btn btn-link",attrs:{to:"/gestion"}},[t._v("Gestion")])],1):t._e(),"USER"==t.role?s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link btn btn-link",attrs:{to:"/matchsheet"}},[t._v("Feuille de Match")])],1):t._e()]),s("span",{staticClass:"navbar-text mr-4"},[t._v(" Bienvenue "+t._s(t.name)+" ")]),s("button",{staticClass:"btn btn-outline-success my-2 my-sm-0",on:{click:t.logout}},[t._v(" Déconnexion ")])])])])},c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])}],u={name:"Navigation",props:{role:String,name:String},methods:{logout:function(){this.$session.removeItem("token"),this.$session.removeItem("username"),this.$session.removeItem("role"),this.$router.push("/login").catch((function(){}))}}},d=u,m=a("2877"),p=Object(m["a"])(d,l,c,!1,null,"312c83f5",null),f=p.exports,h={name:"App",components:{Navigation:f},props:{user:Object},data:function(){return{role:null}},created:function(){this.role=this.user.role}},b=h,v=(a("034f"),Object(m["a"])(b,r,o,!1,null,null,null)),_=v.exports,g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-login"},[s("img",{staticClass:"bg-img-login",attrs:{alt:"background login terrain",src:a("82d3")}}),s("div",{staticClass:"parallelogramme"}),s("h1",{staticClass:"title-co"},[t._v("FFF CESI - Connexion")]),s("div",{staticClass:"container jumbotron container-login"},[t.errorMessage?s("p",{staticClass:"error"},[t._v(" "+t._s(t.errorMessage)+" ")]):t._e(),s("form",{on:{submit:function(e){return e.preventDefault(),t.submit()}}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"username"}},[t._v("Nom utilisateur")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",id:"username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"exampleInputPassword1"}},[t._v("Mot de passe")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"exampleInputPassword1"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Se connecter")])])])])},y=[],C={data:function(){return{username:"",password:""}},props:{errorMessage:{type:String,default:""}},methods:{submit:function(){this.$emit("submit",{username:this.username,password:this.password})}}},j=C,S=(a("5990"),Object(m["a"])(j,g,y,!1,null,"95b4cb4c",null)),k=S.exports,w={components:{App:_,LoginForm:k},data:function(){return{loading:!0,auth:null,user:{username:null,role:null},errorMessage:""}},created:function(){this.$session.getItem("token")?(this.auth=!0,this.user.role=this.$session.getItem("role"),this.user.username=this.$session.getItem("username"),this.user.club_id=this.$session.getItem("clubId")):this.auth=!1,this.loading=!1},methods:{login:function(t){var e=this,a=t.username,s=t.password,n=this.$api.create({resource:"users",data:{username:a,password:s}}).then((function(t){t.data?(e.auth=!0,e.user=t.data.user,e.$session.setItem("token",t.data.accesstoken),e.$session.setItem("username",t.data.user.username),e.$session.setItem("role",t.data.user.role),e.$session.setItem("clubId",t.data.user.club_id),"ADMIN"==e.user.role?e.$router.push("/gestion").catch((function(){})):"USER"==e.user.role&&e.$router.push("/matchsheet").catch((function(){}))):e.errorMessage="Le nom d'utilisateur ou le mot de passe est incorrect"})).catch((function(t){console.log(t)}));n.then((function(){return e.loading=!1}))}}},P=w,$=Object(m["a"])(P,n,i,!1,null,null,null),I=$.exports,x=(a("99af"),a("d4ec")),M=a("bee2"),E=a("bc3a"),O=a.n(E),A=a("e490"),R=a.n(A),T=null,N=function(){function t(e){var a=e.url;Object(x["a"])(this,t),T=O.a.create({baseURL:a,headers:{"Content-Type":"application/json"}})}return Object(M["a"])(t,[{key:"login",value:function(t){T.defaults.headers.common.Authorization="Bearer ".concat(t)}},{key:"logout",value:function(){T.defaults.headers.common.Authorization=""}},{key:"find",value:function(t){var e=t.resource,a=t.query;return T.get(e,{params:a})}},{key:"get",value:function(t){var e=t.resource,a=t.id,s=t.query;return T.get("".concat(e,"/").concat(a),{params:s})}},{key:"create",value:function(t){var e=t.resource,a=t.data,s=t.query,n=t.token;return T.post(e,a,{params:s},this.login(n))}},{key:"update",value:function(t){var e=t.resource,a=t.id,s=t.data,n=t.query,i=t.token;return T.put("".concat(e,"/").concat(a),s,{params:n},this.login(i))}},{key:"destroy",value:function(t){var e=t.resource,a=t.id,s=t.token;return T.delete("".concat(e,"/").concat(a),this.login(s))}}]),t}(),F=new N({url:R.a.ROOT_API}),D=a("8c4f"),z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._m(0),s("div",[s("img",{attrs:{alt:"Vue logo",src:a("70dd")}}),s("h1",{staticClass:"goodbye"},[t._v(" Au revoir "),s("span",[t._v(t._s(t._f("capitalize")(t.user.username)))])])])])},L=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"spinner-grow",staticStyle:{width:"3rem",height:"3rem"},attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[t._v("Loading...")])])}],H=(a("fb6a"),a("d3b7"),a("25f0"),{name:"Home",components:{},data:function(){return{user:null}},created:function(){this.user=this.$parent.user,setTimeout((function(){return window.location.reload()}),3e3)},filters:{capitalize:function(t){return t?(t=t.toString(),t.charAt(0).toUpperCase()+t.slice(1)):""}}}),U=H,V=(a("fd9e"),Object(m["a"])(U,z,L,!1,null,"0f60401a",null)),B=V.exports,Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return"ADMIN"==t.user.role?a("div",[a("div",{staticClass:"row mr-0"},[t._m(0),a("div",{staticClass:"col-sm-10 container"},[a("div",{staticClass:"tab-content",attrs:{id:"v-pills-tabContent"}},[a("div",{staticClass:"tab-pane fade show active",attrs:{id:"v-pills-profile",role:"tabpanel","aria-labelledby":"v-pills-profile-tab"}},[a("EditMatchSheet")],1),a("div",{staticClass:"tab-pane fade",attrs:{id:"v-pills-home",role:"tabpanel","aria-labelledby":"v-pills-home-tab"}},[a("AddMatchSheet")],1)])])])]):t._e()},q=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-2 nav-admin"},[a("div",{staticClass:"nav flex-column nav-pills",attrs:{id:"v-pills-tab",role:"tablist","aria-orientation":"vertical"}},[a("p",{staticClass:"nav-admin-title"},[t._v("Feuille de Match")]),a("a",{staticClass:"nav-link active",attrs:{id:"v-pills-profile-tab","data-toggle":"pill",href:"#v-pills-profile",role:"tab","aria-controls":"v-pills-profile","aria-selected":"true"}},[t._v("Editer")]),a("a",{staticClass:"nav-link",attrs:{id:"v-pills-home-tab","data-toggle":"pill",href:"#v-pills-home",role:"tab","aria-controls":"v-pills-home","aria-selected":"false"}},[t._v("Ajouter")])])])}],G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",{staticClass:"title-form"},[t._v("Ajouter une feuille de match")]),a("form",{staticClass:"jumbotron",attrs:{id:"match-sheet"},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("p",[t._v("Sélection des équipes")]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"inputHome"}},[t._v("Domicile")]),a("div",{staticClass:"col-sm-10"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.data.home_club_id,expression:"data.home_club_id"}],staticClass:"form-control",attrs:{id:"inputHome",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.data,"home_club_id",e.target.multiple?a:a[0])}}},t._l(t.clubs,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"inputVisit"}},[t._v("Extérieur")]),a("div",{staticClass:"col-sm-10"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.data.visitor_club_id,expression:"data.visitor_club_id"}],staticClass:"form-control",attrs:{id:"inputVisit",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.data,"visitor_club_id",e.target.multiple?a:a[0])}}},t._l(t.clubs,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("hr"),a("p",[t._v("Sélection des arbitres")]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"inputArbi1"}},[t._v("Principal")]),a("div",{staticClass:"col-sm-10"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.data.arbiterOne,expression:"data.arbiterOne"}],staticClass:"form-control",attrs:{id:"inputArbi1",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.data,"arbiterOne",e.target.multiple?a:a[0])}}},t._l(t.arbiters,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"inputArbi2"}},[t._v("Assitant n° 1")]),a("div",{staticClass:"col-sm-10"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.data.arbiterTwo,expression:"data.arbiterTwo"}],staticClass:"form-control",attrs:{id:"inputArbi2",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.data,"arbiterTwo",e.target.multiple?a:a[0])}}},t._l(t.arbiters,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"inputArbi3"}},[t._v("Assitant n° 2")]),a("div",{staticClass:"col-sm-10"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.data.arbiterThree,expression:"data.arbiterThree"}],staticClass:"form-control",attrs:{id:"inputArbi3",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.data,"arbiterThree",e.target.multiple?a:a[0])}}},t._l(t.arbiters,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),a("hr"),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"inputDate"}},[t._v("Choisir une date")]),a("div",{staticClass:"col-sm-10"},[a("datepicker",{attrs:{id:"inputDate",language:t.fr,format:"d MMMM yyyy"},model:{value:t.data.date,callback:function(e){t.$set(t.data,"date",e)},expression:"data.date"}})],1)]),a("button",{staticClass:"btn btn-primary mb-2",attrs:{type:"submit"}},[t._v("Enregistrer")]),null!=t.id?a("span",{staticClass:"form-control is-valid"},[t._v("Ajout de la feuille de Match "+t._s(t.id))]):t._e()])])},K=[],J=(a("7db0"),a("96cf"),a("1da1")),W=a("fa33"),Q=a("2430"),Z={name:"AddMatchSheet",components:{Datepicker:W["a"]},data:function(){return{id:null,clubs:[],arbiters:[],data:{visitor_club_id:null,home_club_id:null,arbiterOne:null,arbiterTwo:null,arbiterThree:null,date:new Date},fr:Q["fr"]}},created:function(){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.find({resource:"clubs"});case 2:return a=e.sent,e.next=5,t.$api.find({resource:"persons/arbiter"});case 5:s=e.sent,t.clubs=a.data,t.arbiters=s.data;case 8:case"end":return e.stop()}}),e)})))()},methods:{createrArbiter:function(t,e,a){var s={};return s.person_id=t,s.match_sheet_id=e,s.type=a,s},submit:function(){var t=this;this.id=null;var e=this.data.arbiterOne,a=this.data.arbiterTwo,s=this.data.arbiterThree,n=this.createrArbiter,i=this.$api.create({resource:"matchsheet/create",data:this.data,token:this.$session.getItem("token")}).then((function(i){t.id=i.data.id,t.$api.create({resource:"matchsheet/arbiter/create",data:n(e,i.data.id,"PRINCIPAL"),token:t.$session.getItem("token")}),t.$api.create({resource:"matchsheet/arbiter/create",data:n(a,i.data.id,"ASSISTANT"),token:t.$session.getItem("token")}),t.$api.create({resource:"matchsheet/arbiter/create",data:n(s,i.data.id,"ASSISTANT"),token:t.$session.getItem("token")})}));i.then((function(){return setTimeout(window.location.reload(),2e3)}))}}},X=Z,tt=(a("fce4"),Object(m["a"])(X,G,K,!1,null,"293512a3",null)),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",{staticClass:"title-form"},[t._v("Les feuilles de match")]),a("vue-good-table",{attrs:{columns:t.columns,rows:t.matchsheet,theme:"black-rhino","search-options":{enabled:!0,placeholder:"Rechercher ..."},"sort-options":{enabled:!0,initialSortBy:{field:"date",type:"desc"}}},on:{"on-row-click":t.onRowClick},scopedSlots:t._u([{key:"table-row",fn:function(e){return["homeName"==e.column.field?a("span",[a("div",{staticClass:"d-flex align-items-center"},[a("img",{staticClass:"mr-3 logo",attrs:{src:e.row.homeLogo,alt:"..."}}),a("span",{staticStyle:{"font-weight":"bold",color:"#37a55e"}},[t._v(t._s(e.row.homeName))])])]):"visitorName"==e.column.field?a("span",[a("div",{staticClass:"d-flex align-items-center justify-content-end"},[a("span",{staticStyle:{"font-weight":"bold",color:"tomato"}},[t._v(t._s(e.row.visitorName))]),a("img",{staticClass:"ml-3 logo",attrs:{src:e.row.visitorLogo,alt:"..."}})])]):a("span",[t._v(" "+t._s(e.formattedRow[e.column.field])+" ")])]}}])}),a("b-modal",{attrs:{id:"bv-modal-detail",size:"xl","hide-footer":""},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v("Feuille de Match")]},proxy:!0}])},[a("div",{staticClass:"d-block text-center"},[a("DetailMatchSheet",{attrs:{data:t.data}})],1),a("button",{staticClass:"btn btn-secondary mt-3",attrs:{block:""},on:{click:function(e){return t.$bvModal.hide("bv-modal-detail")}}},[t._v(" Fermer ")])])],1)},st=[],nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"testHtml"}},[a("h4",[t._v("Lieu et date de la rencontre")]),a("p",[t._v(t._s(t.data.location)+" le "+t._s(t._f("moment")(t.data.date,"dddd Do MMMM YYYY")))]),a("ArbiterDetailOfMatchSheet",{ref:"detailsArbiters",attrs:{matchsheetId:t.data.id}}),a("hr"),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6 split"},[a("h4",[a("img",{staticClass:"logo mr-2",attrs:{src:t.data.homeLogo,alt:"logo club home"}}),t._v(t._s(t.data.homeName)+" ")]),a("p",[t._v(" (Domicile) - "),a("span",[t._v(t._s(t.butHome))])]),a("hr"),a("p",[a("span",{staticClass:"font-weight-bold"},[t._v("Entraineur:")]),t._v(" "+t._s(t._f("capitalize")(t.homeStaff_coach))+" "),a("span",{staticClass:"font-weight-bold ml-5"},[t._v("Adjoint:")]),t._v(" "+t._s(t._f("capitalize")(t.homeStaff_second))+" ")]),a("hr"),a("PlayerDetailHome",{ref:"detailsPlayerHome",attrs:{id:"detailsPlayerHome",matchsheetId:t.data.id}})],1),a("div",{staticClass:"col-sm-6"},[a("h4",[t._v(" "+t._s(t.data.visitorName)),a("img",{staticClass:"logo ml-2",attrs:{src:t.data.visitorLogo,alt:"logo club visitor"}})]),a("p",[a("span",[t._v(t._s(t.butVisitor))]),t._v(" - (Extérieur) ")]),a("hr"),a("p",[a("span",{staticClass:"font-weight-bold"},[t._v("Entraineur:")]),t._v(" "+t._s(t._f("capitalize")(t.visitorStaff_coach))+" "),a("span",{staticClass:"font-weight-bold ml-5"},[t._v(" Adjoint: ")]),t._v(" "+t._s(t._f("capitalize")(t.visitorStaff_second))+" ")]),a("hr"),a("PlayerDetailVisitor",{ref:"detailsPlayerVisitor",attrs:{matchsheetId:t.data.id}})],1)]),a("hr"),"CLOSE"==t.status?a("div",[a("Metadata",{ref:"detailsMetadata",attrs:{matchsheetId:t.data.id,isClose:!0}}),"CLOSE"==this.data.status?a("div",[a("PdfExport",{attrs:{references:t.$refs}})],1):t._e(),a("button",{staticClass:"btn btn-danger my-3 w-25",attrs:{type:"button"},on:{click:t.deleteMatchSheet}},[t._v(" Supprimer la feuille de match ")])],1):t._e(),"BEFORE"==t.status||"IN_PROGRESS"==t.status&&"CLOSE"!=t.status?a("div",["BEFORE"==t.status&&0==t.isRun&&1==t.isCandidate?a("button",{staticClass:"btn btn-success my-3 mr-3",attrs:{type:"button"},on:{click:t.runMatch}},[t._v(" Lancer le match ")]):t._e(),"IN_PROGRESS"==t.status||t.isRun?a("div",[a("Metadata",{ref:"detailsMetadata",attrs:{matchsheetId:t.data.id,isClose:!1}}),a("hr"),a("div",{staticClass:"d-flex justify-content-center"},["CLOSE"!=this.data.status?a("button",{staticClass:"btn btn-dark my-3 w-25",attrs:{type:"button"},on:{click:t.updateStatus}},[t._v(" Fermer la feuille de match ")]):t._e()])],1):t._e(),a("button",{staticClass:"btn btn-danger my-3 w-25",attrs:{type:"button"},on:{click:t.deleteMatchSheet}},[t._v(" Supprimer la feuille de match ")])]):t._e()],1)},it=[],rt=(a("a15b"),a("b0c0"),a("ac1f"),a("1276"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h4",[t._v("Arbitres")]),a("div",{staticClass:"card-deck"},t._l(t.arbiters,(function(e){return a("div",{key:e.id,staticClass:"card"},[a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[t._v("Arbitre "+t._s(e.type))]),a("p",{staticClass:"card-text"},[t._v(" "+t._s(e.person.name)+" - "+t._s(e.person.country.alpha_3_code)+" ")])])])})),0)])}),ot=[],lt=(a("a9e3"),{name:"ArbiterDetailOfMatchSheet",props:{matchsheetId:Number},data:function(){return{arbiters:[]}},created:function(){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.find({resource:"matchsheet/".concat(t.matchsheetId,"/arbiter")}).then((function(e){t.arbiters=e.data}));case 2:case"end":return e.stop()}}),e)})))()},methods:{}}),ct=lt,ut=Object(m["a"])(ct,rt,ot,!1,null,"689af466",null),dt=ut.exports,mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("h4",[t._v("Titulaires")]),a("hr"),a("ul",{staticClass:"list-group list-group-flush"},[t._l(t.attcks,(function(e){return a("li",{key:e.id,staticClass:"list-group-item"},[a("span",{staticClass:"badge badge-secondary ml-1"},[t._v(t._s(e.number))]),t._v(" "+t._s(e.name)+" - "+t._s(e.position)+" "+t._s(e.placement)+" "),e.is_captain?a("i",{staticClass:"bi bi-star-fill"}):t._e(),e.is_second_captain?a("i",{staticClass:"bi bi-star-half"}):t._e()])})),t._l(t.mids,(function(e){return a("li",{key:e.id,staticClass:"list-group-item"},[a("span",{staticClass:"badge badge-secondary ml-1"},[t._v(t._s(e.number))]),t._v(" "+t._s(e.name)+" - "+t._s(e.position)+" "+t._s(e.placement)+" "),e.is_captain?a("i",{staticClass:"bi bi-star-fill"}):t._e(),e.is_second_captain?a("i",{staticClass:"bi bi-star-half"}):t._e()])})),t._l(t.defs,(function(e){return a("li",{key:e.id,staticClass:"list-group-item"},[a("span",{staticClass:"badge badge-secondary ml-1"},[t._v(t._s(e.number))]),t._v(" "+t._s(e.name)+" - "+t._s(e.position)+" "+t._s(e.placement)+" "),e.is_captain?a("i",{staticClass:"bi bi-star-fill"}):t._e(),e.is_second_captain?a("i",{staticClass:"bi bi-star-half"}):t._e()])})),t._l(t.goal,(function(e){return a("li",{key:e.id,staticClass:"list-group-item"},[a("span",{staticClass:"badge badge-secondary ml-1"},[t._v(t._s(e.number))]),t._v(" "+t._s(e.name)+" - "+t._s(e.position)+" "+t._s(e.placement)+" "),e.is_captain?a("i",{staticClass:"bi bi-star-fill"}):t._e(),e.is_second_captain?a("i",{staticClass:"bi bi-star-half"}):t._e()])}))],2)]),a("div",{staticClass:"col"},[a("h4",[t._v("Remplaçants")]),a("hr"),a("ul",{staticClass:"list-group list-group-flush"},t._l(t.spare,(function(e){return a("li",{key:e.id,staticClass:"list-group-item"},[a("span",{staticClass:"badge badge-secondary ml-1"},[t._v(t._s(e.number))]),t._v(" "+t._s(e.name)+" - "+t._s(e.poste)+" ")])})),0)])])},pt=[],ft=(a("4de4"),{name:"PlayerDetailHome",props:{matchsheetId:Number},data:function(){return{players:[]}},created:function(){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.find({resource:"matchsheet/".concat(t.matchsheetId,"/player/home")}).then((function(e){t.players=e.data}));case 2:case"end":return e.stop()}}),e)})))()},computed:{attcks:function(){return this.players.filter((function(t){return"ATTAQUANT"==t.poste&&0==t.is_spare}))},mids:function(){return this.players.filter((function(t){return"MILIEU"==t.poste&&0==t.is_spare}))},defs:function(){return this.players.filter((function(t){return"DEFENSEUR"==t.poste&&0==t.is_spare}))},goal:function(){return this.players.filter((function(t){return"GARDIEN"==t.poste&&0==t.is_spare}))},spare:function(){return this.players.filter((function(t){return 1==t.is_spare}))}}}),ht=ft,bt=(a("95ae"),Object(m["a"])(ht,mt,pt,!1,null,"048439bb",null)),vt=bt.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("h4",[t._v("Titulaires")]),a("hr"),a("ul",{staticClass:"list-group list-group-flush"},[t._l(t.attcks,(function(e){return a("li",{key:e.id,staticClass:"list-group-item"},[a("span",{staticClass:"badge badge-secondary ml-1"},[t._v(t._s(e.number))]),t._v(" "+t._s(e.name)+" - "+t._s(e.position)+" "+t._s(e.placement)+" "),e.is_captain?a("i",{staticClass:"bi bi-star-fill"}):t._e(),e.is_second_captain?a("i",{staticClass:"bi bi-star-half"}):t._e()])})),t._l(t.mids,(function(e){return a("li",{key:e.id,staticClass:"list-group-item"},[a("span",{staticClass:"badge badge-secondary ml-1"},[t._v(t._s(e.number))]),t._v(" "+t._s(e.name)+" - "+t._s(e.position)+" "+t._s(e.placement)+" "),e.is_captain?a("i",{staticClass:"bi bi-star-fill"}):t._e(),e.is_second_captain?a("i",{staticClass:"bi bi-star-half"}):t._e()])})),t._l(t.defs,(function(e){return a("li",{key:e.id,staticClass:"list-group-item"},[a("span",{staticClass:"badge badge-secondary ml-1"},[t._v(t._s(e.number))]),t._v(" "+t._s(e.name)+" - "+t._s(e.position)+" "+t._s(e.placement)+" "),e.is_captain?a("i",{staticClass:"bi bi-star-fill"}):t._e(),e.is_second_captain?a("i",{staticClass:"bi bi-star-half"}):t._e()])})),t._l(t.goal,(function(e){return a("li",{key:e.id,staticClass:"list-group-item"},[a("span",{staticClass:"badge badge-secondary ml-1"},[t._v(t._s(e.number))]),t._v(" "+t._s(e.name)+" - "+t._s(e.position)+" "+t._s(e.placement)+" "),e.is_captain?a("i",{staticClass:"bi bi-star-fill"}):t._e(),e.is_second_captain?a("i",{staticClass:"bi bi-star-half"}):t._e()])}))],2)]),a("div",{staticClass:"col"},[a("h4",[t._v("Remplaçants")]),a("hr"),a("ul",{staticClass:"list-group list-group-flush"},t._l(t.spare,(function(e){return a("li",{key:e.id,staticClass:"list-group-item"},[a("span",{staticClass:"badge badge-secondary ml-1"},[t._v(t._s(e.number))]),t._v(" "+t._s(e.name)+" - "+t._s(e.poste)+" ")])})),0)])])},gt=[],yt={name:"PlayerDetailVisitor",props:{matchsheetId:Number},data:function(){return{players:[]}},created:function(){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.find({resource:"matchsheet/".concat(t.matchsheetId,"/player/visitor")}).then((function(e){t.players=e.data}));case 2:case"end":return e.stop()}}),e)})))()},computed:{attcks:function(){return this.players.filter((function(t){return"ATTAQUANT"==t.poste&&0==t.is_spare}))},mids:function(){return this.players.filter((function(t){return"MILIEU"==t.poste&&0==t.is_spare}))},defs:function(){return this.players.filter((function(t){return"DEFENSEUR"==t.poste&&0==t.is_spare}))},goal:function(){return this.players.filter((function(t){return"GARDIEN"==t.poste&&0==t.is_spare}))},spare:function(){return this.players.filter((function(t){return 1==t.is_spare}))}}},Ct=yt,jt=(a("3d53"),Object(m["a"])(Ct,_t,gt,!1,null,"9a82582c",null)),St=jt.exports,kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jumbotron jumbotron-fluid py-3 px-1"},[a("h4",{staticClass:"mb-1"},[t._v("Evènements du Match")]),t.isClose?a("div",t._l(t.metadatas,(function(e){return a("div",{key:e.id+e.name+e.valueTime},[e.home_club_id==e.club_id?a("div",{staticClass:"list-group-event text-left"},[a("span",{staticClass:"icon-metadata",domProps:{innerHTML:t._s(t.render(e.key_metadata_field))}}),t._v(" "+t._s(e.name)+" "+t._s(e.valueTime)+"' min. ")]):a("div",{staticClass:"list-group-item text-right metadata-visitor metaClose"},[a("span",{staticClass:"icon-metadata",domProps:{innerHTML:t._s(t.render(e.key_metadata_field))}}),t._v(" "+t._s(e.name)+" "+t._s(e.valueTime)+"' min. ")])])})),0):t._l(t.metadatas,(function(e){return a("div",{key:e.id+e.name+e.valueTime},[e.home_club_id==e.club_id?a("div",{staticClass:"list-group-event text-left"},[a("button",{staticClass:"btn btn-danger btn-sm mr-1",attrs:{type:"button"},on:{click:function(a){return t.deleteHandler(e.id)}}},[t._v(" x ")]),a("span",{staticClass:"icon-metadata",domProps:{innerHTML:t._s(t.render(e.key_metadata_field))}}),t._v(" "+t._s(e.name)+" "+t._s(e.valueTime)+"' min. ")]):a("div",{staticClass:"list-group-item text-right metadata-visitor"},[a("span",{staticClass:"icon-metadata",domProps:{innerHTML:t._s(t.render(e.key_metadata_field))}}),t._v(" "+t._s(e.name)+" "+t._s(e.valueTime)+"' min. "),a("button",{staticClass:"btn btn-danger btn-sm btn-delete-visitor",attrs:{type:"button"},on:{click:function(a){return t.deleteHandler(e.id)}}},[t._v(" x ")])])])})),t.isClose?t._e():a("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"form-row mt-4"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"inputPlayer"}},[t._v("Joueurs")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.formMetadata.playerSelected,expression:"formMetadata.playerSelected"}],staticClass:"form-control form-control-sm",attrs:{id:"inputPlayer",name:"player"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.formMetadata,"playerSelected",e.target.multiple?a:a[0])}}},t._l(t.groupPlayers,(function(e,s){return a("optgroup",{key:s,attrs:{label:s}},t._l(e,(function(e){return a("option",{key:e.person_id,domProps:{value:e.person_id}},[t._v(" "+t._s(e.number)+" - "+t._s(e.name)+" ")])})),0)})),0)]),a("div",{staticClass:"form-group col-md-4"},[a("label",{attrs:{for:"inputEvent"}},[t._v("Evènements")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.formMetadata.eventSelected,expression:"formMetadata.eventSelected"}],staticClass:"form-control form-control-sm",attrs:{id:"inputEvent",name:"eventKey"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.formMetadata,"eventSelected",e.target.multiple?a:a[0])}}},[a("option",{attrs:{disabled:"",value:""}},[t._v("Evènements")]),t._l(t.enumKey,(function(e){return a("option",{key:e,domProps:{value:e}},["BUT"==e?t._t("default",[t._v("But")]):t._e(),"YELLOW_CARD"==e?t._t("default",[t._v("Carton Jaune")]):t._e(),"RED_CARD"==e?t._t("default",[t._v("Carton Rouge")]):t._e(),"INPUT"==e?t._t("default",[t._v("Entrée")]):t._e(),"OUTPUT"==e?t._t("default",[t._v("Sortie")]):t._e(),"CSC"==e?t._t("default",[t._v("But contre son camp")]):t._e()],2)}))],2)]),a("div",{staticClass:"form-group col-md-2 sm"},[a("label",{attrs:{for:"time"}},[t._v("Temps")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.formMetadata.timeSelected,expression:"formMetadata.timeSelected",modifiers:{number:!0}}],staticClass:"form-control form-control-sm",attrs:{type:"number",id:"time"},domProps:{value:t.formMetadata.timeSelected},on:{input:function(e){e.target.composing||t.$set(t.formMetadata,"timeSelected",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Ajouter l'évènement")])])],2)},wt=[],Pt=(a("d81d"),{name:"Metadata",components:{},props:{matchsheetId:Number,isClose:Boolean},data:function(){return{metadatas:[],players:[],groupPlayers:{domicile:[],visiteur:[]},enumKey:["BUT","YELLOW_CARD","RED_CARD","INPUT","OUTPUT","CSC"],formMetadata:{playerSelected:null,eventSelected:null,timeSelected:null}}},created:function(){this.loadData()},computed:{svgGoal:function(){return a("d10c")}},methods:{loadData:function(){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.find({resource:"matchsheet/".concat(t.matchsheetId,"/metadata")}).then((function(e){t.metadatas=e.data,t.computeScore(e.data)}));case 2:return e.next=4,t.$api.find({resource:"matchsheet/".concat(t.matchsheetId,"/player")}).then((function(e){t.players=e.data,0==t.groupPlayers.domicile.length&&t.players.map((function(e){e.club_id==e.home_club_id?t.groupPlayers.domicile.push(e):t.groupPlayers.visiteur.push(e)}))}));case 4:case"end":return e.stop()}}),e)})))()},computeScore:function(t){var e=this;if(null!=t){this.$parent.butHome=0,this.$parent.butVisitor=0;var a=t.filter((function(t){return t.home_club_id==t.club_id}));a.map((function(t){"BUT"==t.key_metadata_field?e.$parent.butHome+=1:"CSC"==t.key_metadata_field&&(e.$parent.butVisitor+=1)}));var s=t.filter((function(t){return t.visitor_club_id==t.club_id}));s.map((function(t){"BUT"==t.key_metadata_field?e.$parent.butVisitor+=1:"CSC"==t.key_metadata_field&&(e.$parent.butHome+=1)}))}},deleteHandler:function(t){var e=this;this.$api.destroy({resource:"matchsheet/metadata/delete",id:t,token:this.$session.getItem("token")}).then((function(t){console.log(t),200==t.status&&e.loadData()})).catch((function(t){console.log(t)}))},render:function(t){var e="";return"BUT"==t?e='<img src="'.concat(this.svgGoal,'" style="width:17px;"/>'):"YELLOW_CARD"==t?e='<i class="bi bi-file-fill text-warning"></i>':"RED_CARD"==t?e='<i class="bi bi-file-fill text-danger"></i>':"INPUT"==t?e='<i class="bi bi-box-arrow-in-up"></i>':"OUTPUT"==t?e='<i class="bi bi-box-arrow-down"></i>':"CSC"==t&&(e='<img src="'.concat(this.svgGoal,'" style="width:17px;"/> <span>(contre son camp)</span>')),e},submit:function(){var t=this;this.$api.create({resource:"matchsheet/metadata/create",data:{person_id:this.formMetadata.playerSelected,match_sheet_id:this.matchsheetId,key_metadata_field:this.formMetadata.eventSelected,valueTime:this.formMetadata.timeSelected},token:this.$session.getItem("token")}).then((function(e){200==e.status&&t.loadData()})).catch((function(t){console.log(t)}))}}}),$t=Pt,It=(a("fb1c"),Object(m["a"])($t,kt,wt,!1,null,"035d6b48",null)),xt=It.exports,Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.generate}},[t._v(" Export PDF ")])},Et=[],Ot=a("53ca"),At=a("8baf"),Rt=(a("0da4"),a("c1df")),Tt=a.n(Rt),Nt={name:"PdfExport",props:{references:Object},data:function(){return{doc:new At["default"]}},methods:{flattenObject:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var s in t){var n=e?e+"_"+s:s;"object"==Object(Ot["a"])(t[s])?this.flattenObject(t[s],n,a):a[n]=t[s]}return a},flatMapArbiters:function(){var t=this,e=this.references.detailsArbiters.arbiters,a=[];return e.map((function(e){var s=t.flattenObject(e.person);s.type=e.type,a.push(s)})),a},computeSpare:function(t){var e=[];return t.map((function(t){var a={};a.number=t.number,a.name=t.name,null==t.placement?(a.placement="Remplaçant",a.position="Remplaçant"):(a.placement=t.placement,a.position=t.position,t.is_captain?a.name="(Capt.) "+t.name:t.is_second_captain&&(a.name="(Capt. suppléant) "+t.name)),e.push(a)})),e},columns:function(){return[{header:"Num.",dataKey:"number"},{header:"Nom",dataKey:"name"},{header:"Placement",dataKey:"placement"},{header:"Position",dataKey:"position"}]},generate:function(){var t=this.references.detailsPlayerHome.$parent.data,e=this.flatMapArbiters();this.doc.setFontSize(16),this.doc.text("Feuille de Match - "+Tt()(t.date).format("dddd Do MMMM YYYY"),14,5),this.doc.setFontSize(12),this.doc.text(t.homeName+" (domicile) "+this.references.detailsPlayerHome.$parent.butHome+" - "+this.references.detailsPlayerHome.$parent.butVisitor+" "+t.visitorName+" (visiteur) ",14,9),this.doc.setFontSize(8),this.doc.text("Arbitres:",14,18),this.doc.setFontSize(6),this.doc.autoTable({columnStyles:{europe:{halign:"center"}},body:e,columns:[{header:"Nom",dataKey:"name"},{header:"Nationalité",dataKey:"country_nationality"},{header:"Type",dataKey:"type"}],styles:{fontSize:6,lineHeight:.5},startY:20}),this.doc.text(t.homeName+": ",14,this.doc.lastAutoTable.finalY+5),this.doc.text("Entraineur: "+this.references.detailsPlayerHome.$parent.homeStaff_coach+" - Adjoint: "+this.references.detailsPlayerHome.$parent.homeStaff_second,40,this.doc.lastAutoTable.finalY+5),this.doc.autoTable({body:this.computeSpare(this.references.detailsPlayerHome.players),columns:this.columns(),startY:this.doc.lastAutoTable.finalY+6,styles:{maxCellHeight:1,fontSize:6}}),this.doc.text(t.visitorName,14,this.doc.lastAutoTable.finalY+5),this.doc.text("Entraineur: "+this.references.detailsPlayerVisitor.$parent.visitorStaff_coach+" - Adjoint: "+this.references.detailsPlayerVisitor.$parent.visitorStaff_second,40,this.doc.lastAutoTable.finalY+5),this.doc.autoTable({body:this.computeSpare(this.references.detailsPlayerVisitor.players),columns:this.columns(),startY:this.doc.lastAutoTable.finalY+6,styles:{maxCellHeight:1,fontSize:4}}),this.doc.text("Evènements du match",14,this.doc.lastAutoTable.finalY+5),this.doc.autoTable({body:this.references.detailsMetadata.metadatas,columns:[{header:"Nom du joueur",dataKey:"name"},{header:"Type",dataKey:"key_metadata_field"},{header:"Temps",dataKey:"valueTime"}],startY:this.doc.lastAutoTable.finalY+6,styles:{fontSize:6}}),this.doc.save("table.pdf")}}},Ft=Nt,Dt=Object(m["a"])(Ft,Mt,Et,!1,null,"118b4404",null),zt=Dt.exports,Lt={name:"DetailMatchSheet",components:{ArbiterDetailOfMatchSheet:dt,PlayerDetailHome:vt,PlayerDetailVisitor:St,Metadata:xt,PdfExport:zt},props:{data:Object},data:function(){return{homeStaff_coach:null,homeStaff_second:null,visitorStaff_coach:null,visitorStaff_second:null,arbiters:[],metadatas:null,butHome:0,butVisitor:0,status:null,isCandidate:!1,isRun:!1}},created:function(){this.loadData(),this.checkMatchsheetIsCandidate()},methods:{checkMatchsheetIsCandidate:function(){var t=this;this.$api.find({resource:"matchsheet/".concat(this.data.id,"/")}).then((function(e){e.data&&(t.status=e.data.status,1==e.data.candidate_home&&1==e.data.candidate_visitor&&"BEFORE"==e.data.status&&(t.isCandidate=!0))}))},runMatch:function(){var t=this;this.isRun=!0,this.$api.update({resource:"matchsheet/edit/status",id:this.data.id,data:{status:"IN_PROGRESS"},token:this.$session.getItem("token")}).then((function(){t.data.status="IN_PROGRESS"}))},loadData:function(){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.find({resource:"clubs/".concat(t.data.home_club_id,"/staffs")}).then((function(e){t.homeStaff_coach=t.getCoach(e.data[0].people),t.homeStaff_second=t.getSecond(e.data[0].people)}));case 2:return e.next=4,t.$api.find({resource:"clubs/".concat(t.data.visitor_club_id,"/staffs")}).then((function(e){t.visitorStaff_coach=t.getCoach(e.data[0].people),t.visitorStaff_second=t.getSecond(e.data[0].people)}));case 4:return e.next=6,t.$api.find({resource:"matchsheet/".concat(t.data.id,"/arbiter")}).then((function(e){t.arbiters=e.data}));case 6:case"end":return e.stop()}}),e)})))()},getCoach:function(t){var e=null;for(var a in t)"coach"==t[a].role&&(e=t[a].name);return e},getSecond:function(t){var e=null;for(var a in t)"second_coach"==t[a].role&&(e=t[a].name);return e},updateStatus:function(){var t=this,e={};e.date=this.data.date,e.home_club_id=this.data.home_club_id,e.visitor_club_id=this.data.visitor_club_id,e.status="CLOSE",e.candidate_home=this.data.candidate_home,e.candidate_visitor=this.data.candidate_visitor,this.$api.update({resource:"matchsheet/edit",id:this.data.id,data:e,token:this.$session.getItem("token")}).then((function(){t.data.status="CLOSE",t.status="CLOSE"}))},deleteMatchSheet:function(){var t=this;this.$api.destroy({resource:"matchsheet/delete",id:this.data.id,token:this.$session.getItem("token")}).then((function(e){200==e.status&&(t.$bvModal.hide("bv-modal-detail"),setTimeout(window.location.reload(),1e3))})).catch((function(t){console.log(t)}))}},filters:{capitalize:function(t){if(!t)return"";for(var e=t.toLowerCase().split(" "),a=0;a<e.length;a++)e[a]=e[a].charAt(0).toUpperCase()+e[a].substring(1);return e.join(" ")}}},Ht=Lt,Ut=(a("55a5"),Object(m["a"])(Ht,nt,it,!1,null,"f68d5ea6",null)),Vt=Ut.exports,Bt=a("f617"),Yt=(a("dac4"),a("2dd8"),{name:"EditMatchSheet",components:{VueGoodTable:Bt["a"],DetailMatchSheet:Vt},data:function(){return{matchsheet:[],data:null,columns:[{label:"ID",field:"id",type:"number"},{label:"Domicile",field:"homeName"},{label:"Extérieur",field:"visitorName"},{label:"Lieu",field:"location"},{label:"Statut",field:"status"},{label:"Date",field:"date",type:"date",dateInputFormat:"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'",dateOutputFormat:"dd / MM / yyyy"}]}},created:function(){this.loadData()},methods:{onRowClick:function(t){this.data=t.row,this.$bvModal.show("bv-modal-detail")},loadData:function(){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.find({resource:"matchsheet/clubs"});case 2:a=e.sent,t.matchsheet=a.data;case 4:case"end":return e.stop()}}),e)})))()}}}),qt=Yt,Gt=(a("d574"),Object(m["a"])(qt,at,st,!1,null,"25cf7726",null)),Kt=Gt.exports,Jt={name:"MatchSheetAdmin",components:{AddMatchSheet:et,EditMatchSheet:Kt},data:function(){return{user:null,token:null}},created:function(){this.user=this.$parent.user}},Wt=Jt,Qt=(a("8126"),Object(m["a"])(Wt,Y,q,!1,null,null,null)),Zt=Qt.exports,Xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return"USER"==t.user.role?a("Home",{attrs:{clubId:t.user.club_id}}):t._e()},te=[],ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("h1",{staticClass:"m-5 text-center"},[t._v(" Feuille de match "),t.hasMatchsheet?a("span",[t._v("n°"+t._s(t.matchsheetId))]):t._e()]),t.hasMatchsheet?a("div",[a("MatchSheetClient",{attrs:{items:t.players,matchsheetId:t.matchsheetId}})],1):a("div",{staticClass:"blocEmpty"},[a("p",[t._v("Vous n'avez pas de feuille de match en cours")])])])},ae=[],se=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"matchsheet"},[s("form",{attrs:{id:"match-sheet"},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[s("div",{staticClass:"jumbotron jumbotron-fluid"},[s("div",{staticClass:"container"},[s("h2",{staticClass:"display-4"},[t._v("Etape 1")]),s("hr"),s("p",{staticClass:"lead"},[t._v(" Veuillez indiquer les joueurs titulaires pour le match en renseignant pour chacun le poste et le placement sur le terrain. ")]),s("p",[t._v(" Joueurs restant à sélectionner: "+t._s(11-this.holderPlayers.length)+" ")]),s("hr"),s("div",{staticClass:"container-fluid position-relative d-flex flex-column terrain",style:{"background-image":"url("+a("b35e")+") "},attrs:{id:"terrain"}},[s("div",{ref:"container",staticClass:"row",attrs:{id:"first"}},[t._l(t.counterOfFirstRow,(function(e){return s("CardForm",{key:e,attrs:{placement:t.placement,position:t.positionFirstRow,unSelectedItems:t.unSelectedItems}})})),t.counterOfPlayers<11?s("button",{staticClass:"btn btn-info addFormCard",attrs:{type:"button"},on:{click:t.addFirstRowCard}},[t._v(" Ajouter ")]):t._e()],2),s("div",{staticClass:"row",attrs:{id:"second"}},[t._l(t.counterOfMiddleRow,(function(e){return s("CardForm",{key:e,attrs:{placement:t.placement,position:t.positionMiddleRow,unSelectedItems:t.unSelectedItems}})})),t.counterOfPlayers<11?s("button",{staticClass:"btn btn-info addFormCard",attrs:{type:"button"},on:{click:t.addMiddleRowCard}},[t._v(" + ")]):t._e()],2),s("div",{staticClass:"row",attrs:{id:"third"}},[t._l(t.counterOfBackRow,(function(e){return s("CardForm",{key:e,attrs:{placement:t.placement,position:t.positionBackRow,unSelectedItems:t.unSelectedItems}})})),t.counterOfPlayers<11?s("button",{staticClass:"btn btn-info addFormCard",attrs:{type:"button"},on:{click:t.addBackRowCard}},[t._v(" + ")]):t._e()],2),s("div",{staticClass:"row",attrs:{id:"goal"}},[s("CardForm",{attrs:{immutable:!0,placement:null,position:t.positionGoal,unSelectedItems:t.unSelectedItems}})],1)])])]),s("div",{staticClass:"jumbotron jumbotron-fluid bg-white"},[s("div",{staticClass:"container"},[s("h2",{staticClass:"display-4"},[t._v("Etape 2")]),s("hr"),s("p",{staticClass:"lead"},[t._v(" En fonction de la liste de votre équipe (officielle ligue 1), veuillez renseigner vos remplaçants. Le nombre de vos joueurs sur le banc doit être compris entre trois et six maximum. ")]),s("hr"),s("SpareForm",{attrs:{unSelectedItems:t.unSelectedItems,sparePlayers:t.sparePlayers}})],1)]),s("div",{staticClass:"jumbotron jumbotron-fluid"},[s("div",{staticClass:"container"},[s("h2",{staticClass:"display-4"},[t._v("Etape 3")]),s("hr"),s("p",{staticClass:"lead"},[t._v(" Il s'agit dans cette dernière étape de nommer le capitaine du match ainsi que son suppléant. Finaliser la feuille de match en cliquant sur valider. ")]),s("hr"),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-sm-4 col-form-label col-form-label-sm",attrs:{for:"colFormLabelCapt"}},[t._v("Sélectionner le capitaine: ")]),s("div",{staticClass:"col-sm-8"},[s("select",{staticClass:"form-control form-control-sm",attrs:{id:"colFormLabelCapt"},on:{change:function(e){return t.onChangeCaptain(e)}}},[s("option",{attrs:{selectedCaptain:""},domProps:{value:null}},[t._v(" "+t._s(t.selectedCaptain)+" ")]),t._l(this.holderPlayersAndNotSecond,(function(e){return s("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])}))],2)])]),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-sm-4 col-form-label col-form-label-sm",attrs:{for:"colFormLabelSecond"}},[t._v("Sélectionner le capitaine suppléant: ")]),s("div",{staticClass:"col-sm-8"},[s("select",{staticClass:"form-control form-control-sm",attrs:{id:"colFormLabelSecond"},on:{change:function(e){return t.onChangeCaptainSecond(e)}}},[s("option",{attrs:{selectedCaptainSecond:""},domProps:{value:null}},[t._v(" "+t._s(t.selectedCaptainSecond)+" ")]),t._l(this.holderPlayersAndNotCaptain,(function(e){return s("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])}))],2)])])])]),s("div",{staticClass:"jumbotron jumbotron-fluid bg-white"},[s("div",{staticClass:"container"},[s("h2",{staticClass:"display-4"},[t._v("Etape 4")]),s("hr"),s("p",{staticClass:"lead"},[t._v("Finaliser la feuille de Match")]),s("hr"),t.errorForm?s("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[s("p",[t._v(t._s(t.errorForm))])]):t._e(),s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Valider")])])])])])},ne=[],ie=(a("45fc"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"containerCard"},[a("div",{staticClass:"contentCard card"},[t.newPlayer.id?a("span",{staticClass:"position-absolute badge"},[t._v(t._s(t.newPlayer.number))]):t._e(),a("div",{staticClass:"card-body"},[a("div",{staticClass:"card-title"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"col"},[t.position.length>1?a("select",{staticClass:"form-control form-control-sm",attrs:{name:"position"},on:{change:function(e){return t.onChangePosition(e)}}},[a("option",{attrs:{value:"",selected:"",disabled:""}},[t._v("Poste")]),t._l(t.position,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])}))],2):a("p",{staticClass:"text-center font-weight-bold"},[t._v(" "+t._s(t.position[0])+" ")])]),a("div",{staticClass:"col"},[t.placement?a("select",{staticClass:"form-control form-control-sm",attrs:{name:"placement"},on:{change:function(e){return t.onChangePlacment(e)}}},[a("option",{attrs:{value:"",selected:"",disabled:""}},[t._v("Placement")]),t._l(t.placement,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])}))],2):t._e()])])]),t.immutable?t._e():a("div",{staticClass:"position-absolute delete",on:{click:t.deleteHandler}},[a("button",{staticClass:"btn btn-danger me-md-2",attrs:{type:"button"}},[t._v("x")])]),a("select",{staticClass:"form-control form-control-sm",attrs:{name:"gamer"},on:{change:function(e){return t.onChangePlayer()}}},[a("option",{attrs:{selected:""},domProps:{value:null}},[t._v(" "+t._s(t.selected)+" ")]),t._l(t.unSelectedItems,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.poste)+" -"+t._s(e.name)+" ")])}))],2)])])])}),re=[],oe=(a("a434"),{name:"CardForm",props:{position:Array,placement:Array,unSelectedItems:Array,immutable:Boolean},data:function(){return{selected:"Sélectionner un joueur",newPlayer:{},positionPlayer:"",placementPlayer:""}},created:function(){1==this.position.length&&(this.positionPlayer=this.position[0])},methods:{deleteHandler:function(t){this.newPlayer.id&&this.removeOldPlayer(this.newPlayer.id);var e=t.target.parentNode,a=e.parentNode,s=a.parentNode,n=s.parentNode,i=n.parentNode;i.removeChild(n),this.$parent.counterOfPlayers--},removeOldPlayer:function(t){for(var e=0;e<this.$parent.players.length;e++)this.$parent.players[e].id==t&&(console.log("remove"),this.$parent.players.splice(e,1),e--)},sendPlayerOnParent:function(){this.newPlayer.placement=this.placementPlayer,this.newPlayer.position=this.positionPlayer,this.$parent.players.push(this.newPlayer)},clonePlayer:function(){for(var t=0;t<this.$parent.unSelectedItems.length;t++)this.$parent.unSelectedItems[t].id==event.target.value&&(this.newPlayer=this.$parent.unSelectedItems[t],this.selected=this.newPlayer.name)},onChangePlayer:function(){this.newPlayer.id&&this.removeOldPlayer(this.newPlayer.id),this.clonePlayer(),this.sendPlayerOnParent()},onChangePosition:function(t){if(this.positionPlayer=t.target.value,this.newPlayer.id)for(var e=0;e<this.$parent.players.length;e++)this.$parent.players[e].id==this.newPlayer.id&&(this.$parent.players[e].position=this.positionPlayer)},onChangePlacment:function(t){if(this.placementPlayer=t.target.value,this.newPlayer.id)for(var e=0;e<this.$parent.players.length;e++)this.$parent.players[e].id==this.newPlayer.id&&(this.$parent.players[e].placement=this.placementPlayer)}}}),le=oe,ce=(a("f9a9"),Object(m["a"])(le,ie,re,!1,null,"3546969c",null)),ue=ce.exports,de=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("h4",[t._v(" Les joueurs disponibles "),a("span",{staticClass:"badge badge-warning"},[t._v(t._s(t.unSelectedItems.length))])]),a("div",{staticClass:"list-group"},t._l(t.unSelectedItems,(function(e){return a("button",{key:e.id,staticClass:"list-group-item list-group-item-action",class:{disabled:t.disabled},attrs:{type:"button"},on:{click:function(a){return t.addOnSidelines(e)}}},[t._v(" "+t._s(e.poste)+" - "+t._s(e.number)+" - "+t._s(e.name)+" "),t.sparePlayers.length<6?a("i",{staticClass:"float-right bi bi-caret-right"}):t._e()])})),0)]),a("div",{staticClass:"col"},[a("h4",[t._v(" Les remplaçants "+t._s(t.sparePlayers.length)+" / 6 "),t.sparePlayers.length<3?a("small",{staticClass:"float-right text-danger"},[a("i",{staticClass:"bi bi-exclamation-triangle"}),t._v(" (3 joueurs minimum)")]):6==t.sparePlayers.length?a("small",{staticClass:"float-right"},[a("i",{staticClass:"bi bi-exclamation-circle"}),t._v(" (Maximum de remplaçants)")]):a("small",{staticClass:"float-right text-success"},[a("i",{staticClass:"bi bi-check"})])]),a("ul",{staticClass:"list-group"},t._l(t.sparePlayers,(function(e){return a("li",{key:e.id,staticClass:"list-group-item",on:{click:function(a){return t.removeSpare(e)}}},[t._v(" "+t._s(e.poste)+" - "+t._s(e.number)+" - "+t._s(e.name)+" "),t._m(0,!0)])})),0)])])},me=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("i",{staticClass:"bi bi-x text-danger"})])}],pe={name:"SpareForm",props:{numberOfPlayers:Number,sparePlayers:Array,unSelectedItems:Array},data:function(){return{}},computed:{disabled:function(){return this.sparePlayers.length>=6}},methods:{addOnSidelines:function(t){this.disabled||(t.isSpare=!0,this.$parent.players.push(t))},removeSpare:function(t){for(var e=0;e<this.$parent.players.length;e++)this.$parent.players[e].id===t.id&&(t.isSpare=!1,this.$parent.players.splice(e,1),e--)}}},fe=pe,he=(a("44d9"),Object(m["a"])(fe,de,me,!1,null,"84954246",null)),be=he.exports,ve={name:"MatchsheetClient",components:{CardForm:ue,SpareForm:be},props:{items:Array,matchsheetId:Number},data:function(){return{players:[],selectedCaptain:"",selectedCaptainId:null,selectedCaptainSecond:"",selectedCaptainSecondId:null,counterOfPlayers:11,counterOfFirstRow:2,counterOfMiddleRow:4,counterOfBackRow:4,placement:["GAUCHE","CENTRE","DROIT"],positionFirstRow:["AVANT","AILIER"],positionMiddleRow:["MILIEU_OFF","MILIEU","MILIEU_DEF"],positionBackRow:["ARRIERE"],positionGoal:["GARDIEN"],errorForm:""}},created:function(){},computed:{unSelectedItems:function(){var t=this;return this.items.filter((function(e){var a=e.id;return!t.players.some((function(t){var e=t.id;return e===a}))}))},holderPlayers:function(){return this.players.filter((function(t){return!t.isSpare}))},holderPlayersAndNotCaptain:function(){var t=this;return this.players.filter((function(e){return!e.isSpare&&!(e.id==t.selectedCaptainId)}))},holderPlayersAndNotSecond:function(){var t=this;return this.players.filter((function(e){return!e.isSpare&&!(e.id==t.selectedCaptainSecondId)}))},sparePlayers:function(){return this.players.filter((function(t){return t.isSpare}))}},methods:{onChangeCaptain:function(t){this.selectedCaptainId=t.target.value,console.log(this.selectedCaptainId)},onChangeCaptainSecond:function(t){this.selectedCaptainSecondId=t.target.value,console.log(this.selectedCaptainSecondId)},addRoleCaptainToPlayer:function(t,e){for(var a=0;a<this.players.length;a++)this.players[a].id==t?this.players[a].iscaptain=!0:this.players[a].id==e&&(this.players[a].issecondcaptain=!0)},addFirstRowCard:function(){this.counterOfFirstRow++,this.counterOfPlayers++},addMiddleRowCard:function(){this.counterOfMiddleRow++,this.counterOfPlayers++},addBackRowCard:function(){this.counterOfBackRow++,this.counterOfPlayers++},sanitizeForEntities:function(t){var e=this,a=[];return t.map((function(t){var s={};s.person_id=t.id,s.match_sheet_id=e.matchsheetId,s.position=t.position?t.position:null,s.placement=t.placement?t.placement:null,s.is_captain=1==t.iscaptain,s.is_second_captain=1==t.issecondcaptain,s.is_spare=!!t.isSpare&&t.isSpare,a.push(s)})),a},submit:function(){var t=this;this.addRoleCaptainToPlayer(this.selectedCaptainId,this.selectedCaptainSecondId),console.log(this.$parent.clubId),11!=this.holderPlayers.length?this.errorForm="Il manque des titulaires dans l'étape 1 !":this.sparePlayers<3?this.errorForm="Il manque des remplaçants dans l'étape 2 !":null==this.selectedCaptainId?this.errorForm="Veuillez sélectionner le capitaine de l'équipe !":null==this.selectedCaptainSecondId?this.errorForm="Veuillez sélectionner le capitaine suppléant de l'équipe !":(this.$api.create({resource:"/matchsheet/player/create",data:this.sanitizeForEntities(this.players),token:this.$session.getItem("token")}).then((function(t){console.log(t),window.location.reload()})),this.$api.find({resource:"/matchsheet/inprogress/".concat(this.$parent.clubId)}).then((function(e){console.log(e),e.data.length>0&&(console.log("ici"),console.log(e.data[0].home_club_id,t.$parent.clubId),e.data[0].home_club_id==t.$parent.clubId?t.$api.update({resource:"/matchsheet/edit/candidate/home",id:t.matchsheetId,data:{candidate_home:1},token:t.$session.getItem("token")}).then((function(t){return console.log(t)})):e.data[0].visitor_club_id==t.$parent.clubId&&t.$api.update({resource:"/matchsheet/edit/candidate/visitor",id:t.matchsheetId,data:{candidate_visitor:1},token:t.$session.getItem("token")}).then((function(t){return console.log(t)})))})))}}},_e=ve,ge=(a("9b4e"),Object(m["a"])(_e,se,ne,!1,null,"237ca110",null)),ye=ge.exports,Ce={name:"HomeClient",components:{MatchSheetClient:ye},props:{clubId:String},data:function(){return{hasMatchsheet:!1,players:[],matchsheetId:0}},created:function(){this.getMatchsheetProgressAndPlayersClub()},computed:{},methods:{getMatchsheetProgressAndPlayersClub:function(){var t=this;this.$api.find({resource:"/matchsheet/inprogress/".concat(this.clubId)}).then((function(e){e.data.length>0&&(e.data[0].home_club_id==t.clubId?t.hasMatchsheet=0==e.data[0].candidate_home:e.data[0].visitor_club_id==t.clubId&&(t.hasMatchsheet=0==e.data[0].candidate_visitor),t.hasMatchsheet&&(t.matchsheetId=e.data[0].id,t.$api.find({resource:"/clubs/".concat(t.clubId,"/players")}).then((function(e){t.players=e.data[0].people}))))}))}}},je=Ce,Se=(a("b1f4"),Object(m["a"])(je,ee,ae,!1,null,"0e8b9298",null)),ke=Se.exports,we={name:"MatchSheetClient",components:{Home:ke},data:function(){return{user:null}},created:function(){this.user=this.$parent.user}},Pe=we,$e=Object(m["a"])(Pe,Xt,te,!1,null,null,null),Ie=$e.exports;s["a"].use(D["a"]);var xe=[{path:"/gestion",name:"MatchSheetAdmin",component:Zt},{path:"/matchsheet",name:"MatchSheetClient",component:Ie},{path:"/login",name:"AuthWrapper",component:B}],Me=new D["a"]({mode:"history",base:"/",routes:xe}),Ee=Me,Oe=a("dbbe");a("4989"),a("cd74"),a("f9e3");s["a"].config.productionTip=!1,s["a"].$api=F,Object.defineProperty(s["a"].prototype,"$api",{get:function(){return F}}),Object.defineProperty(s["a"].prototype,"$session",{get:function(){return window.sessionStorage}}),s["a"].use(Oe["a"]);var Ae=a("c1df");a("9f26"),s["a"].use(a("2ead"),{moment:Ae}),new s["a"]({router:Ee,render:function(t){return t(I)}}).$mount("#app")},5990:function(t,e,a){"use strict";a("4f3c")},6169:function(t,e,a){},"684e":function(t,e,a){},"6a88":function(t,e,a){},"70dd":function(t,e,a){t.exports=a.p+"img/fff_logo.svg.b0418745.png"},"78ea":function(t,e,a){},8126:function(t,e,a){"use strict";a("51bf")},"82d3":function(t,e,a){t.exports=a.p+"img/terrlog.4e412964.jpg"},"85ec":function(t,e,a){},"95ae":function(t,e,a){"use strict";a("b0b2")},9667:function(t,e,a){},"9b4e":function(t,e,a){"use strict";a("15ae")},b0b2:function(t,e,a){},b1f4:function(t,e,a){"use strict";a("684e")},b35e:function(t,e,a){t.exports=a.p+"img/terrain.79cf1ef3.png"},d10c:function(t,e,a){t.exports=a.p+"img/svgGoal.d0c88750.svg"},d574:function(t,e,a){"use strict";a("df41")},df41:function(t,e,a){},e490:function(t,e){t.exports={NODE_ENV:"DEV",ROOT_API:"http://localhost:8080/api/v1/"}},f9a9:function(t,e,a){"use strict";a("9667")},fb1c:function(t,e,a){"use strict";a("406b")},fce4:function(t,e,a){"use strict";a("6a88")},fd9e:function(t,e,a){"use strict";a("54f1")}});
//# sourceMappingURL=app.b4e437cf.js.map